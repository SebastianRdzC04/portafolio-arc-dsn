---
import type { Subject } from '../data/subjects';

interface Props {
  subject: Subject;
  workCount: number;
}

const { subject, workCount } = Astro.props;
---

<a href={`/${subject.slug}/`} class="card" style={`--card-accent: ${subject.color}`}>
  <div class="card__badge" aria-hidden="true">
    {subject.shortName}
  </div>
  <h2 class="card__title">{subject.name}</h2>
  <p class="card__description">{subject.description}</p>
  <div class="card__meta">
    <span class="card__semester">{subject.semester}</span>
    <span class="card__count">
      {workCount} {workCount === 1 ? 'trabajo' : 'trabajos'}
    </span>
  </div>
</a>

<style>
  .card {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    padding: var(--space-6);
    background-color: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    text-decoration: none;
    color: inherit;
    transition:
      border-color var(--transition-normal),
      box-shadow var(--transition-normal),
      transform var(--transition-normal);
    cursor: pointer;
  }

  .card:hover {
    border-color: var(--card-accent, var(--color-accent));
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .card:focus-visible {
    outline: 2px solid var(--card-accent, var(--color-accent));
    outline-offset: 2px;
  }

  .card__badge {
    display: inline-flex;
    align-self: flex-start;
    padding: var(--space-1) var(--space-3);
    background-color: var(--card-accent, var(--color-accent));
    color: var(--color-text-inverse);
    font-family: var(--font-heading);
    font-size: var(--text-xs);
    font-weight: var(--weight-bold);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    border-radius: var(--radius-full);
  }

  .card__title {
    font-family: var(--font-heading);
    font-size: var(--text-xl);
    font-weight: var(--weight-bold);
    color: var(--color-text);
    line-height: var(--leading-tight);
  }

  .card__description {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    line-height: var(--leading-relaxed);
  }

  .card__meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--space-3);
    border-top: 1px solid var(--color-border);
    font-size: var(--text-xs);
    color: var(--color-text-muted);
  }

  .card__count {
    font-weight: var(--weight-medium);
    color: var(--color-text-secondary);
  }
</style>
